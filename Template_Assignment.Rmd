---
title: "Houshold shortage"
author: "Joris heeremans(2787294), Tom Nethe(2784796), Mohamed Hannun(2824390), Jelle Menninga(2864828), Daan Notenboom (2853496), Suleyman Yigitsoy(2861891), Soufyan Attokoki() "
date: "`r Sys.Date()`"
output: pdf_document
---

# Set-up your environment

```{r package_install, include=FALSE}
install.packages("tidyverse")
```

```{r packages}
require(tidyverse)
```

# Houshold Shortage

Joris Heeremans, Tom Nethe, Mohamed Hannun, Jelle Menninga, Daan Notenboom, Suleyman Yigitsoy, Soufyan Attokoki

Tutorial group number: 5

Tutorial lecturer's name: Jack Fitzgerald

# Part 1 - Identify a Social Problem
The Netherlands is grappling with a severe housing shortage, estimated at around 400,000 homes. 
This imbalance between supply and demand, was created by population growth (including immigration), an increase in single-person households, 
and a lack of new construction, has led to skyrocketing prices and fierce competition for available properties. 
The house prices have risen significantly, making it difficult for many, especially solo buyers and those with low to middle incomes, 
to find suitable and affordable housing. The government needs to come up with new ideas, otherwise this problem will only grow bigger.
Use APA referencing throughout your document.



# Part 2 - Data Sourcing

## 2.1 Load in the data

Preferably from a URL, but if not, make sure to download the data and store it in a shared location that you can load the data in from. Do not store the data in a folder you include in the Github repository!

```{r loading_data}
Voorraad_woningen <- read.csv("Vooraad_woningen_Google - Voorraad_woningen.csv")
KW1_voorraad <- Voorraad_woningen[grepl("1e kwartaal", Voorraad_woningen$Perioden), ]

Huishoudens <- read.csv("Aantal_huishoudens - Blad1 (2).csv")

```


## 2.2 Provide a short summary of the dataset(s)

```{r}
head(KW1_voorraad)
head(Huishoudens)
```

Both data sets include information about the stock houses and the number of households in the Netherlands per province and period. 

## 2.3 Describe the type of variables included

Think of things like:

The variables contain the stock amount of the housing in the Netherlands and the number of households. 

The data has been collected form a institution that is linked to the government. The data are absolute. That is because the government knows how many houses there are in the Netherlands and because the goverment knows how many people there are looking for- and living in a house. 

# Part 3 - Quantifying

## 3.1 Data cleaning

We already filter the data through the CBS filter. 
```{r data_cleaning}


# Extract the year as the first four characters
voorraad_woningen$Year <- substr(voorraad_woningen$Perioden, 1, 4)
huishoudens$Year <- substr(huishoudens$Periode, 1, 4)

years <- c("2019", "2020", "2021")

# Filter: only the Netherlands and provinces, only selected years, only first quarter
housing_stock_select <- voorraad_woningen %>%
  filter((Regio.s == "Nederland" | grepl("Provincie", Regio.s)) &
         Year %in% years &
         grepl("1e kwartaal", Perioden)) %>%
  select(Region = Regio.s, Year, HousingStock = value)

households_select <- huishoudens %>%
  filter((Regio.s == "Nederland" | grepl("Provincie", Regio.s)) &
         Year %in% years &
         grepl("1e kwartaal", Periode)) %>%
  select(Region = Regio.s, Year, Households = value)

# Preview the result
head(housing_stock_select)
head(households_select)










```

Please use a separate 'R block' of code for each type of cleaning. So, e.g. one for missing values, a new one for removing unnecessary variables etc.

## 3.2 Generate necessary variables

Variable 1

```{r gen_var1}

```

Variable 2

```{r gen_var2}

```

## 3.3 Visualize temporal variation

```{r}

```

## 3.4 Visualize spatial variation

```{r visualise_map}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.5 Visualize sub-population variation

What is the poverty rate by state?

```{r visualise_subpopulations}
dataset$inmetro <- dataset$inmetro %>% as.factor()
# Boxplot of poverty rate by state using the 'midwest' dataset
ggplot(dataset, aes(x = inmetro, y = percadultpoverty)) +
  geom_boxplot() +
  labs(
    title = "Distribution of Poverty Rates by Metropolitan status (Midwest counties)",
    x = "Metropolitan Area",
    y = "Poverty Rate of Adults (%)"
  ) +
  theme_minimal() +
  theme(
    legend.position = "right"
  )
```
library(dplyr)
library(ggplot2)

voorraad_nl <- KW1_voorraad %>% filter(Regio.s == "Nederland")
huishoudens_nl <- Huishoudens %>% filter(Regio.s == "Nederland")

colnames(voorraad_nl) <- c("Regio", "Periode", "Voorraad")
colnames(huishoudens_nl) <- c("Regio", "Periode", "Huishoudens")


combined <- merge(voorraad_nl, huishoudens_nl, by = c("Regio", "Periode"))

# Maak de data 'long' voor ggplot
combined_long <- combined %>%
  select(Periode, Voorraad, Huishoudens) %>%
  tidyr::pivot_longer(cols = c("Voorraad", "Huishoudens"),
                      names_to = "Type",
                      values_to = "Aantal")

ggplot(combined_long, aes(x = Periode, y = Aantal, color = Type, group = Type)) +
  geom_line(size = 1.2) +
  labs(title = "Vergelijking woningvoorraad en huishoudens (Nederland)",
       x = "Periode", y = "Aantal", color = "black") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.6 Event analysis

Analyze the relationship between two variables.

```{r analysis}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

# Part 4 - Discussion

## 4.1 Discuss your findings

# Part 5 - Reproducibility

## 5.1 Github repository link

Provide the link to your PUBLIC repository here: ...

## 5.2 Reference list
CBS Statline. (May 23, 2025). https://opendata.cbs.nl/statline/#/CBS/nl/dataset/81955NED/table?fromstatweb (Last used on June 2, 2025)
CBS Statline. (June 3, 2025). https://opendata.cbs.nl/statline/#/CBS/nl/dataset/71486ned/table?fromstatweb (Last used on June 2, 2025)



Use APA referencing throughout your document.
